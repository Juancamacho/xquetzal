/*
* $Id$
*
* main.c (ollin) for Linux Version 0.8.5
* Copyright (C) 2002 by Free Software Foundation, Inc.
* Author: Victor H De la Luz <itztli@gmail.com>
*
*                         COPYING
*
* This  program  is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License  as
* published by the Free Software Foundation; either version 2, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty  of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR  PURPOSE.  See  the
* GNU General Public License for more details.
*
* You  should  have  received  a  copy  of the GNU General Public
* License along with this program; if  not,  write  to  the  Free
* Software Foundation, Inc., 675  Mass  Ave, Cambridge, MA 02139,
* USA.
*
* ########################## OVERVIEW ###########################
*
* Ollin display the flux data from xquetzal/server program.
* 
* ###############################################################
*
* ###################### Revision History #######################
*
* $Log$
* 0.8.5 Feb/2005
* ###############################################################
*/


/*
 * Initial main.c file generated by Glade. Edit as required.
 * Glade will not overwrite this file.
 */

#ifdef HAVE_CONFIG_H
#  include <config.h>
#endif

#include <gtk/gtk.h>

#include "interface.h"
#include "support.h"

#include <sys/shm.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

key_t Clave;
int Id_Memoria;
int *Memoria = NULL;

int
main (int argc, char *argv[])
{
  GtkWidget *windowPrincipal;

  Clave = ftok("/bin/ls",33);
  if (Clave == -1){
    printf("No consigo clave para memoria compartida\n");
    exit(0);
  }
  Id_Memoria = shmget(Clave,sizeof(int)*36,0777);
  if (Id_Memoria == -1){
    printf("No consigo Id para memoria compartida\n");
    exit(0);
  }
  Memoria = (int*)shmat(Id_Memoria,(char*)0,0);
  if (Memoria == NULL){
    printf("No consigo memoria compartida\n");
    exit(0);
  }  


  gtk_set_locale ();
  gtk_init (&argc, &argv);

  add_pixmap_directory (PACKAGE_DATA_DIR "/pixmaps");
  add_pixmap_directory (PACKAGE_SOURCE_DIR "/pixmaps");

  /*
   * The following code was added by Glade to create one of each component
   * (except popup menus), just so that you see something after building
   * the project. Delete any components that you don't want shown initially.
   */
  windowPrincipal = create_windowPrincipal ();
  gtk_widget_show (windowPrincipal);

  gtk_main ();

  if(Id_Memoria != -1){
    shmdt((char*)Memoria);
  } 
  exit(0);
  return 1;
}

